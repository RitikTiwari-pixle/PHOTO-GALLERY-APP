<!-- This file goes inside the 'templates/client/' folder -->

{% extends "layout.html" %}
{% block title %}Find Your Photos{% endblock %}
{% block body_content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
            <h1 class="h2 mt-3 mb-1 fw-bold">Welcome, Event Guest!</h1>
            <p class="text-muted">Ready to find your amazing event photos? We'll match them to your selfie in seconds!</p>
            
            <div id="scanner-ui">
                <div class="camera-container my-4">
                    <video id="video" autoplay playsinline muted></video>
                </div>
                <button id="take-selfie-btn" class="btn btn-primary btn-lg">Take My Selfie!</button>
                 <div class="p-4 mt-4 bg-light rounded text-start">
                    <h6>How to Get Perfect Photo Matches:</h6>
                    <ul class="list-unstyled text-muted small">
                        <li><i data-feather="check" class="me-2 text-success"></i>Ensure good lighting, facing forward.</li>
                        <li><i data-feather="check" class="me-2 text-success"></i>Only one person per selfie for accurate matching.</li>
                        <li><i data-feather="x" class="me-2 text-danger"></i>No hats or sunglasses, please.</li>
                    </ul>
                </div>
            </div>

            <div id="loading-container" style="display: none;" class="my-5">
                <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-3 text-muted">Searching for your photos...</p>
            </div>

            <div id="results-container">
                <!-- Matched photos will be injected here by JavaScript -->
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script src="{{ url_for('static', filename='js/client.js') }}"></script>
<script>
    const eventId = {{ event.id }};
    initializeScanner(eventId);
</script>
{% endblock %}
